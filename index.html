<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Morikawa NY 2026</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/pocketbase@latest/dist/pocketbase.umd.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body { 
      margin:0; 
      padding:0; 
      color:white; 
      font-family:'Noto Sans JP',sans-serif; 
      overflow:hidden; 
      height:100vh;
    }

    /* Слои для смены фонов */
    #backgrounds { 
      position:fixed; 
      top:0; left:0; 
      width:100%; height:100%; 
      z-index:-2;
    }
    .bg-gif { 
      position:absolute; 
      top:0; left:0; 
      width:100%; height:100%; 
      background-size:cover; 
      background-position:center; 
      opacity:0; 
      transition:opacity 5s ease-in-out; 
    }
    .bg-gif.active { opacity:1; }

    #snow { 
      position:fixed; 
      top:0; left:0; 
      width:100%; height:100%; 
      pointer-events:none; 
      opacity:0.5; 
      background:url('https://media.tenor.com/cPBQj33Iu-YAAAAM/cherry-blossom-anime.gif') center/cover fixed; 
      mix-blend-mode:screen; 
      z-index:-1;
    }

    .container { 
      position:relative; 
      z-index:10; 
      text-align:center; 
      padding:4vh 5vw; 
      display:none; 
      backdrop-filter: blur(8px); 
      background:rgba(0,0,0,0.5); 
      border-radius:20px; 
      margin:3vh 3vw; 
      box-shadow:0 0 20px rgba(255,105,180,0.3); 
      max-height:85vh;
      overflow-y:auto;
    }
    .active { display:block; }

    /* Мобильный */
    h1 { font-size:9vw; margin:5vh 0; text-shadow:0 0 20px #ff1493; color:#ff69b4; }
    .countdown { font-size:6vw; margin:6vh 0; color:#ff69b4; text-shadow:0 0 12px #ff1493; }
    #game { width:90vw; height:90vw; max-width:360px; max-height:360px; margin:6vh auto; position:relative; background:rgba(255,105,180,0.15); border-radius:40px; overflow:hidden; border:4px solid #ff69b4; box-shadow:0 0 30px #ff1493; }
    .kadzyun { position:absolute; width:20vw; height:20vw; max-width:80px; max-height:80px; background:url('https://i.imgur.com/0Z9kZ0j.png') center/cover; cursor:pointer; animation:fadeIn 0.5s, glow 1.5s infinite alternate; }
    @keyframes glow { from { box-shadow:0 0 15px #ff69b4; } to { box-shadow:0 0 30px #ff1493; } }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
    .score { font-size:6.5vw; margin:4vh; color:#ffd700; text-shadow:0 0 15px gold; }
    .buttons { margin:8vh 0; }
    button { background:linear-gradient(#ff1493, #ff69b4); border:none; color:white; padding:4vh 8vw; margin:3vh; border-radius:25px; font-size:5.5vw; cursor:pointer; box-shadow:0 0 25px #ff69b4; transition:0.5s; min-height:12vh; }
    button:active { transform:scale(1.1); }
    .top { margin:6vh; font-size:5vw; background:rgba(0,0,0,0.7); padding:5vh; border-radius:25px; }
    nav { position:fixed; bottom:0; left:0; width:100%; display:flex; justify-content:space-around; background:rgba(0,0,0,0.8); padding:3vh; backdrop-filter: blur(15px); z-index:20; }
    nav button { flex:1; margin:2vw; padding:3vh; font-size:4.5vw; background:#ff1493; box-shadow:0 0 20px #ff69b4; }

    #case-model { width:70vw; height:70vw; max-width:280px; max-height:280px; margin:8vh auto; background:url('https://png.pngtree.com/png-vector/20200214/ourlarge/pngtree-japanese-red-envelope-with-sakura-branch-and-cherry-blossom-vector-png-image_2143468.jpg') center/cover; cursor:pointer; transition:0.6s; border-radius:40px; box-shadow:0 0 40px #ff1493; position:relative; overflow:hidden; }
    #case-model::after { content:''; position:absolute; top:0; left:0; width:100%; height:100%; background:url('https://media.giphy.com/media/26uf1q4rdoKq2wRJC/giphy.gif') center/cover; opacity:0; transition:0.6s; mix-blend-mode:screen; }
    #case-model:hover::after { opacity:0.4; }
    #case-model.opening { animation: shakeOpen 2s ease-in-out; }
    @keyframes shakeOpen {
      0% { transform: scale(1) rotate(0); }
      20% { transform: scale(1.15) rotate(-12deg); box-shadow: 0 0 60px #ff1493; }
      50% { transform: scale(1.4); opacity: 0.6; }
      100% { transform: scale(1) rotate(0); opacity: 1; }
    }

    #drop-animation { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); width:90vw; height:70vh; max-width:360px; max-height:500px; display:none; z-index:30; animation:revealCard 1.2s ease-out; }
    @keyframes revealCard { from {opacity:0; transform:scale(0.4) translate(-50%,-50%);} to {opacity:1; transform:scale(1) translate(-50%,-50%);} }
    .card-display { width:100%; height:100%; background:rgba(0,0,0,0.7); border:6px solid gold; border-radius:30px; padding:5vw; text-align:center; box-shadow:0 0 50px #ffd700; position:relative; overflow:hidden; }
    .rarity-common { border-color:#bbb; }
    .rarity-rare { border-color:#00ff00; }
    .rarity-epic { border-color:#ff00ff; box-shadow:0 0 60px #ff00ff; }
    .card-img { width:70vw; height:70vw; max-width:260px; max-height:260px; object-fit:cover; border-radius:20px; margin:8vw 0; box-shadow:0 0 30px #ff69b4; }
    #collection { display:grid; grid-template-columns:repeat(2,1fr); gap:4vw; margin:6vw; padding:3vw; }
    .collected-card { width:100%; padding-bottom:133%; background-size:cover; background-position:center; border-radius:15px; opacity:0.7; box-shadow:0 0 15px #000; transition:0.5s; position:relative; }
    .collected-card.owned { opacity:1; box-shadow:0 0 30px gold; transform:scale(1.05); animation: pulse 3s infinite; }
    @keyframes pulse { 0% { transform:scale(1.05); } 50% { transform:scale(1.15); } 100% { transform:scale(1.05); } }
    .confetti { position:absolute; width:15px; height:15px; background:#ff69b4; border-radius:50%; animation:confettiFall 4s linear infinite; opacity:0.8; }
    @keyframes confettiFall { 0% {transform:translateY(-150%) rotate(0deg);} 100% {transform:translateY(150vh) rotate(720deg);} }
    #daily-info { font-size:6vw; margin:8vw; padding:5vw; background:rgba(255,20,147,0.4); border-radius:30px; box-shadow:0 0 25px #ff69b4; }

    /* ПК версия */
    @media (min-width: 768px) {
      h1 { font-size:4vw; }
      .countdown { font-size:3vw; }
      #game { width:400px; height:400px; }
      button { font-size:2vw; padding:1.5vh 3vw; margin:1vh; }
      nav { position:fixed; left:0; top:0; width:180px; height:100vh; flex-direction:column; padding:5vh 0; }
      nav button { width:80%; margin:2vh auto; font-size:1.8vw; padding:2vh; }
      .container { margin-left:200px; padding:3vh 4vw; }
      #collection { grid-template-columns:repeat(auto-fill, minmax(200px,1fr)); gap:30px; }
      #case-model { width:300px; height:300px; }
      #daily-info { font-size:2.2vw; }
      .top { font-size:1.8vw; }
      .buttons button { font-size:1.8vw; padding:1.5vh 3vw; }
    }

    /* Lo-Fi музыка по умолчанию (40% громкость) */
    #lofi-iframe { position:fixed; right:-1000px; opacity:0; }
  </style>
</head>
<body>
  <!-- Сменяющиеся фоны -->
  <div id="backgrounds">
    <div class="bg-gif active" style="background-image:url('https://media.tenor.com/ljZfH3ZkEqEAAAAM/cherry-blossom.gif')"></div> <!-- Падающие лепестки -->
    <div class="bg-gif" style="background-image:url('https://i.pinimg.com/originals/84/02/63/840263510f21979c94eb380e8fb7705c.gif')"></div> <!-- Ночь с сакурой -->
    <div class="bg-gif" style="background-image:url('https://media.tenor.com/7XmJ_cF2NzwAAAAM/sakura-sakura-blossoms.gif')"></div> <!-- Аниме сакура -->
    <div class="bg-gif" style="background-image:url('https://i.pinimg.com/originals/81/d2/e5/81d2e5f7453fcc26d4dcf0a92a5b9a50.gif')"></div> <!-- Lo-Fi стиль -->
    <div class="bg-gif" style="background-image:url('https://media.giphy.com/media/26uf1q4rdoKq2wRJC/giphy.gif')"></div> <!-- Фейерверки фестиваль -->
  </div>

  <div id="snow"></div>

  <!-- Lo-Fi музыка (скрытая, 40% громкость) -->
  <iframe id="lofi-iframe" src="https://www.youtube.com/embed/5qap5aO4i9A?autoplay=1&loop=1&playlist=5qap5aO4i9A&volume=40" allow="autoplay"></iframe>

  <!-- ... весь остальной HTML (контейнеры, nav) как в предыдущей версии ... -->

  <script>
    // Смена фонов
    const backgrounds = document.querySelectorAll('.bg-gif');
    let currentBg = 0;
    setInterval(() => {
      backgrounds[currentBg].classList.remove('active');
      currentBg = (currentBg + 1) % backgrounds.length;
      backgrounds[currentBg].classList.add('active');
    }, 30000); // Каждые 30 секунд

    // ... весь остальной скрипт (PocketBase, кейсы, коллекция и т.д.) ...
  </script>
</body>
</html>
